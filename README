# Jira Assistant MCP Server

An MCP (Model Context Protocol) server for managing Jira tickets. Designed for rapid iteration while preventing duplicate work between engineers.

## Setup

### 1. Install dependencies

```bash
poetry install
```

### 2. Configure environment

Create a `.env` file in the project root:

```
JIRA_HOST=https://your-domain.atlassian.net
JIRA_EMAIL=your-email@example.com
JIRA_API_TOKEN=your-api-token-here
ACTIONABLE_STATUS=To Do
PROJECT_KEYS=PROJ1,PROJ2
```

**Environment Variables:**
- `JIRA_HOST` (required): Your Jira instance URL
- `JIRA_EMAIL` (required): Your Jira account email
- `JIRA_API_TOKEN` (required): Your Jira API token
- `ACTIONABLE_STATUS` (optional): Status that indicates a ticket is ready for pickup (default: "To Do")
- `PROJECT_KEYS` (optional): Comma-separated list of project keys to scope queries

To get your API token:
1. Go to https://id.atlassian.com/manage-profile/security/api-tokens
2. Click "Create API token"
3. Copy the token and paste it in your `.env` file

### 3. Configure Cursor to use this MCP server

Add the following to your Cursor MCP settings (`~/.cursor/mcp.json` or the workspace `.cursor/mcp.json`):

```json
{
  "mcpServers": {
    "jira-assistant": {
      "command": "poetry",
      "args": ["run", "jira-assistant"],
      "cwd": "C:\\dev\\jira-assistant"
    }
  }
}
```

## Available Tools

### Read Operations

#### `get_assigned_tickets`
Get all Jira tickets assigned to you.

**Parameters:**
- `max_results` (optional): Maximum number of tickets to return (default: 50)
- `status` (optional): Filter by status (e.g., "In Progress", "To Do")
- `project` (optional): Filter by project key (e.g., "PROJ")
- `exclude_done` (optional): Exclude completed tickets (default: true)

#### `get_available_tickets`
Get unassigned tickets that are ready to be picked up.

**Parameters:**
- `max_results` (optional): Maximum number of tickets to return (default: 50)
- `status` (optional): Override the actionable status filter
- `project` (optional): Filter by project key

#### `get_available_epics`
Get open epics that can be used to link new work.

**Parameters:**
- `max_results` (optional): Maximum number of epics to return (default: 50)
- `project` (optional): Filter by project key

#### `get_ticket_details`
Get detailed information about a specific ticket including description and comments.

**Parameters:**
- `ticket_key` (required): The Jira ticket key (e.g., "PROJ-123")

#### `search_similar_tickets`
Search for tickets with similar text to find potential duplicates or related work.

**Parameters:**
- `search_text` (required): Text to search for in ticket summaries and descriptions
- `max_results` (optional): Maximum number of results (default: 10)
- `include_done` (optional): Include completed tickets in search (default: false)
- `project` (optional): Filter by project key for faster searches

### Write Operations

#### `create_new_ticket`
Create a new Jira ticket. Automatically checks for similar existing tickets and warns if potential duplicates are found.

**Parameters:**
- `project` (required): Project key (e.g., "PROJ")
- `summary` (required): Ticket title/summary
- `description` (optional): Detailed description of the ticket
- `issue_type` (optional): Issue type (default: "Task")
- `epic_key` (optional): Epic key to link this ticket to

#### `update_ticket_details`
Update fields on an existing Jira ticket.

**Parameters:**
- `ticket_key` (required): The Jira ticket key (e.g., "PROJ-123")
- `summary` (optional): New ticket title/summary
- `description` (optional): New description
- `assignee` (optional): Assignee account ID or email

#### `transition_ticket`
Move a ticket to a different status.

**Parameters:**
- `ticket_key` (required): The Jira ticket key (e.g., "PROJ-123")
- `transition_name` (required): Name of the transition (e.g., "In Progress", "Done")

## Development

Run the test script to verify your configuration:

```bash
poetry run python test_api.py
```

Run the server directly for testing:

```bash
poetry run python -m jira_assistant.server
```
